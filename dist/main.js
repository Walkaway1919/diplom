!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const r=(e,t,n,o,l,a)=>{e.style[t]=n+"%",e.style.display="block",(0!==l&&l>0?n<=o:n>=o)?(n+=l,requestAnimationFrame(()=>{r(e,t,n,o,l,a)})):(e.style[t]=o+"%",a())};var o=r;var l=e=>{let t="string"==typeof e?document.querySelector(e):e,n=t.querySelector(".popup-content");return{openPopup(){return n.style.top="-100%",o(t,"opacity",0,100,5,()=>{o(n,"top",-100,25,5,()=>{})}),this},closePopup(){return o(n,"top",25,100,10,()=>{o(t,"opacity",100,0,-3,()=>{t.style.display="none"})}),this},triggerOpen(e,t){return document.addEventListener("click",n=>{n.target.classList.contains(e)&&(n.preventDefault(),t(),this.openPopup())}),this},triggerClose(){return t.addEventListener("click",e=>{let t=e.target.closest(".popup-content");!e.target.classList.contains("popup-close")&&t||(e.preventDefault(),this.closePopup())}),this}}};var a=(e,t)=>{let n=document.getElementById(e),r=n.querySelectorAll(".panel-default");const o=e=>{let t=e.querySelector(".panel-collapse");t&&(t.classList.contains("in")?t.classList.remove("in"):(t.classList.add("in"),r.forEach(t=>{if(e!==t){let e=t.querySelector(".panel-collapse");e&&e.classList.remove("in")}})))};n.addEventListener("click",e=>{if(e.target.classList.contains("panel-heading")||e.target.closest(".panel-heading")){e.preventDefault();let t=e.target.closest(".panel-default");o(t)}if(e.target.classList.contains("construct-btn")||e.target.closest(".construct-btn")){e.preventDefault();let t=!1;r.forEach((e,n)=>{let r=e.querySelector(".panel-collapse");r&&r.classList.contains("in")&&(t=n)}),t<r.length-1&&o(r[t+1])}t&&t()})};var c=()=>{let e=document.querySelector(".add-sentence-btn"),t=e.parentNode;e.addEventListener("click",()=>{t.querySelectorAll(".col-xs-12").forEach(e=>{e.classList.remove("visible-sm-block"),e.classList.remove("hidden")}),e.style.display="none"})};var s=()=>{document.addEventListener("input",(function(e){if("user_name"===e.target.name){let t=/[^а-яА-Я\s]{0,}/g;e.target.value=e.target.value.replace(t,"")}if("user_phone"===e.target.name){let t=/^\+?\d{0,11}/g;e.target.value=e.target.value.match(t)[0]}if("user_quest"===e.target.name){let t=/[^?!,.а-яА-ЯёЁ0-9\s]+$/;e.target.value=e.target.value.replace(t,"")}}))};var i=()=>{const e=document.createElement("div");let t=l(".popup-consultation").triggerClose();document.addEventListener("submit",n=>{if(n.preventDefault(),n.target.classList.contains("director-form")){const e=new FormData(n.target);let r=JSON.stringify(Object.fromEntries(e)),o=document.createElement("input");o.type="hidden",o.name="outer_data",o.value=r,document.querySelector(".popup-consultation").querySelector("form").prepend(o),t.openPopup()}else{let t=n.target.querySelectorAll("button, input[type=submit]");t.forEach(e=>{e.disabled=!0}),n.target.appendChild(e),e.textContent="Load";let r=document.querySelector("img.status");r||(r=document.createElement("img"),r.classList.add("status"),r.style.width="64px",r.style.height="64px",n.target.append(r)),r.src="img/spinner.gif";const o=new FormData(n.target);let a={};for(const[e,t]of o.entries())a[e]="outer_data"===e?JSON.parse(t):t;e.style.display="block",fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)}).then(t=>{if(200!==t.status)throw new Error;r.src="img/success.png",e.textContent="Success",n.target.reset(),setTimeout(()=>{let e=n.target.closest(".popup");e&&l(e).closePopup()},3e3)}).catch(t=>{e.textContent="Error",r.src="img/error.png"}).finally(()=>{setTimeout(()=>{e.style.display="none",document.querySelector("img.status").remove(),t.forEach(e=>{e.disabled=!1})},3e3)})}})};let u=(()=>{let e=document.getElementById("accordion"),t=document.getElementById("myonoffswitch"),n=document.getElementById("well-two"),r=document.getElementById("calc-result"),o=document.querySelector(".save_calc_data_here"),l=document.createElement("input"),c={};e.reset(),r.value="",l.type="hidden",l.name="outer_data",o.prepend(l);const s=(e,t=!0)=>{"checkbox"===e.type?c[e.name]=e.checked:c[e.name]=e.value,t&&u()},i=()=>{t.checked?n.style.display="none":n.style.display="block"},u=()=>{let e=c.septic_type?1e4:15e3,t=100;"2 метра"===c.septic_well_1_d&&(t+=20),"2 штуки"===c.septic_well_1_a?t+=30:"3 штуки"===c.septic_well_1_a&&(t+=50),c.septic_type||("2 метра"===c.septic_well_2_d&&(t+=20),"2 штуки"===c.septic_well_2_a?t+=30:"3 штуки"===c.septic_well_2_a&&(t+=50));let n=e*t/100;c.bottom_exist&&(n+=c.septic_type?1e3:2e3),r.value=n,c.calc_result=n;let l={...c};c.septic_type&&(delete l.septic_well_2_d,delete l.septic_well_2_a),l.distance||(l.distance=0);let a=o.querySelector('[name="outer_data"]');a||(a=document.createElement("input"),a.type="hidden",a.name="outer_data",o.prepend(a)),a.value=JSON.stringify(l)};return i(),e.querySelectorAll("input,select").forEach(e=>s(e,!1)),t.addEventListener("change",i),e.addEventListener("change",e=>s(e.target)),a("accordion",u),u})();l(".popup-discount").triggerOpen("call-btn",u).triggerClose(),l(".popup-discount").triggerOpen("discount-btn",()=>{let e=document.querySelector(".popup-discount").querySelector('[name="outer_data"]');e&&e.remove()}).triggerClose(),l(".popup-check").triggerOpen("check-btn").triggerClose(),a("accordion-two"),c(),s(),i()}]);